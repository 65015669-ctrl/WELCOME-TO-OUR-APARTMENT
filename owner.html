<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);
date_default_timezone_set('Asia/Bangkok');
include("config.php");
?>
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á</title>
<style>
:root{--g1:#0a1628;--g2:#1a2d50;--g3:#274472;--g4:#3a6098}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,sans-serif;background:linear-gradient(135deg,var(--g1),var(--g2),var(--g3));min-height:100vh;padding-bottom:80px}
.hd{background:rgba(0,0,0,.2);color:#fff;padding:20px;text-align:center}
.hd h2{margin:0;display:flex;align-items:center;justify-content:center;gap:10px}
.wrap{display:flex;gap:25px;max-width:1100px;margin:30px auto;padding:0 15px;flex-wrap:wrap;justify-content:center}
.box{flex:1;min-width:300px;width:100%;max-width:520px;background:#fff;padding:30px;border-radius:16px;box-shadow:0 15px 40px rgba(0,0,0,.25)}
.box h3{color:var(--g2);text-align:center;margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid var(--g4);display:flex;align-items:center;justify-content:center;gap:8px}
label{display:block;margin-top:14px;font-weight:600;color:#333;font-size:13px}
input,select,textarea{width:100%;padding:12px;margin-top:6px;border:2px solid #e0e0e0;border-radius:10px;font-size:14px;transition:all 0.3s;font-family:inherit}
textarea{resize:vertical;min-height:80px}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--g3);box-shadow:0 0 0 3px rgba(39,68,114,.15)}
button{margin-top:20px;width:100%;padding:14px;background:linear-gradient(135deg,var(--g3),var(--g2));color:#fff;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;box-shadow:0 5px 15px rgba(26,45,80,.4);transition:all 0.3s}
button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(26,45,80,.5)}
.msg{padding:12px;border-radius:10px;text-align:center;margin-bottom:15px}
.msg.success{background:var(--g3);color:#fff}
.msg.error{background:#e53935;color:#fff}
.hist{max-width:1100px;margin:25px auto;padding:0 15px}
.hist .box{max-width:100%;min-width:auto}
.table-container{width:100%;overflow-x:auto;margin-top:10px}
table{width:100%;border-collapse:collapse;min-width:800px}
th,td{padding:12px;text-align:center;border:1px solid #bdc3c7;white-space:nowrap}
th{background:var(--g2);color:#fff;font-weight:600;font-size:14px}
td{color:#333;font-size:14px}
tr:nth-child(even){background:#f8fafc}
tr:hover td{background:#e3f2fd;color:var(--g2);cursor:default}
.row{display:flex;gap:15px}
.row .col{flex:1}

/* Navigation Bar */
.nav-bar{position:fixed;bottom:0;left:0;right:0;background:rgba(255,255,255,0.98);padding:12px 20px;box-shadow:0 -4px 20px rgba(0,0,0,0.15);display:flex;justify-content:center;align-items:center;gap:15px;z-index:1000}
.nav-btn{display:flex;align-items:center;gap:8px;padding:12px 24px;border-radius:10px;text-decoration:none;font-weight:600;font-size:14px;transition:all 0.3s;border:none;cursor:pointer}
.nav-btn.prev{background:linear-gradient(135deg,#78909c,#546e7a);color:#fff}
.nav-btn.prev:hover{transform:translateX(-5px);box-shadow:0 4px 15px rgba(84,110,122,0.4)}
.nav-btn.home{background:linear-gradient(135deg,var(--g3),var(--g2));color:#fff}
.nav-btn.home:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(26,45,80,0.5)}
.nav-btn.next{background:linear-gradient(135deg,#42a5f5,#1e88e5);color:#fff}
.nav-btn.next:hover{transform:translateX(5px);box-shadow:0 4px 15px rgba(30,136,229,0.4)}
.nav-btn.disabled{background:#e0e0e0;color:#9e9e9e;cursor:not-allowed;pointer-events:none}
.nav-info{text-align:center;color:#666;font-size:12px}
.nav-info strong{color:var(--g2)}
</style>
</head>
<body>

<div class="hd">
    <h2>üè¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ï‡πÄ‡∏°‡∏ô‡∏ï‡πå</h2>
</div>

<div class="wrap">
    <div class="box">
        <h3>üìù ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ï‡πÄ‡∏°‡∏ô‡∏ï‡πå</h3>
        
        <?php
        if(isset($_POST['save'])){
            $owner_name = $_POST['owner_name'];
            $phone = $_POST['phone'];
            $email = $_POST['email'];
            $salary = $_POST['salary'];
            $benefits = $_POST['benefits'];
            $check_in_time = $_POST['check_in_time'];
            $check_out_time = $_POST['check_out_time'];

            $sql = "INSERT INTO owner(owner_name,phone,email,salary,benefits,check_in_time,check_out_time)
                    VALUES('$owner_name','$phone','$email','$salary','$benefits','$check_in_time','$check_out_time')";
            
            if(mysqli_query($conn,$sql)){
                echo "<div class='msg success'>‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢</div>";
            }else{
                echo "<div class='msg error'>‚ùå Error: ".mysqli_error($conn)."</div>";
            }
        }
        ?>
        
        <form method="post">
            <label>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á</label>
            <input type="text" name="owner_name" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á" required>
            
            <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
            <input type="text" name="phone" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" required>
            
            <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
            <input type="email" name="email" placeholder="example@email.com" required>
            
            <div class="row">
                <div class="col">
                    <label>‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
                    <input type="number" name="salary" min="0" step="0.01" placeholder="0.00" required>
                </div>
                <div class="col">
                    <label>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£ (‡∏ö‡∏≤‡∏ó)</label>
                    <input type="number" name="benefits" min="0" step="0.01" placeholder="0.00" required>
                </div>
            </div>
            
            <div class="row">
                <div class="col">
                    <label>‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</label>
                    <input type="time" name="check_in_time" required>
                </div>
                <div class="col">
                    <label>‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô</label>
                    <input type="time" name="check_out_time" required>
                </div>
            </div>
            
            <button type="submit" name="save">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        </form>
    </div>
</div>

<div class="hist">
    <div class="box">
        <h3>üìã ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ï‡πÄ‡∏°‡∏ô‡∏ï‡πå</h3>
        <div class="table-container">
        <table>
            <tr>
                <th>‡∏£‡∏´‡∏±‡∏™</th>
                <th>‡∏ä‡∏∑‡πà‡∏≠</th>
                <th>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</th>
                <th>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                <th>‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th>
                <th>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£</th>
                <th>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</th>
                <th>‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô</th>
            </tr>
<?php
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏ö‡∏ö‡πÑ‡∏ó‡∏¢
function thaiTime($time){
    if($time == "00:00:00" || empty($time)) return "-";
    return date("H:i", strtotime($time)) . " ‡∏ô.";
}

$result = mysqli_query($conn,"SELECT * FROM owner ORDER BY owner_id DESC");
if(mysqli_num_rows($result) > 0){
    while($row = mysqli_fetch_assoc($result)){
        echo "<tr>";
        echo "<td>".$row['owner_id']."</td>";
        echo "<td>".$row['owner_name']."</td>";
        echo "<td>".$row['phone']."</td>";
        echo "<td>".$row['email']."</td>";
        $salary = is_numeric($row['salary']) ? floatval($row['salary']) : 0;
        $benefits = $row['benefits'];
        echo "<td>‡∏ø".number_format($salary,2)."</td>";
        echo "<td>".(is_numeric($benefits) ? "‡∏ø".number_format(floatval($benefits),2) : htmlspecialchars($benefits))."</td>";
        echo "<td>".thaiTime($row['check_in_time'])."</td>";
        echo "<td>".thaiTime($row['check_out_time'])."</td>";
        echo "</tr>";
    }
}else{
    echo "<tr><td colspan='8' style='color:#888;'>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á</td></tr>";
}
?>
        </table>
        </div>
    </div>
</div>

<!-- Navigation Bar -->
<div class="nav-bar">
    <a href="tenant.php" class="nav-btn prev">‚¨ÖÔ∏è ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</a>
    <div class="nav-info">
        <strong>2</strong> / 4<br>
        <small>‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á</small>
    </div>
    <a href="index.php" class="nav-btn home">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <a href="contract2.php" class="nav-btn next">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚û°Ô∏è</a>
</div>

</body>
</html>
