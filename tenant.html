<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);
include("config.php");
?>
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤</title>
<style>
:root{--g1:#0a1628;--g2:#1a2d50;--g3:#274472;--g4:#3a6098}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,sans-serif;background:linear-gradient(135deg,var(--g1),var(--g2),var(--g3));min-height:100vh;padding-bottom:80px}
.hd{background:rgba(0,0,0,.2);color:#fff;padding:20px;text-align:center}
.hd h2{margin:0;display:flex;align-items:center;justify-content:center;gap:10px}
.wrap{display:flex;gap:25px;max-width:1100px;margin:30px auto;padding:0 15px;flex-wrap:wrap;justify-content:center}
.box{flex:1;min-width:300px;width:100%;max-width:520px;background:#fff;padding:30px;border-radius:16px;box-shadow:0 15px 40px rgba(0,0,0,.25)}
.box h3{color:var(--g2);text-align:center;margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid var(--g4);display:flex;align-items:center;justify-content:center;gap:8px}
label{display:block;margin-top:14px;font-weight:600;color:#333;font-size:13px}
input,select{width:100%;padding:12px;margin-top:6px;border:2px solid #e0e0e0;border-radius:10px;font-size:14px;transition:all 0.3s}
input:focus,select:focus{outline:none;border-color:var(--g3);box-shadow:0 0 0 3px rgba(39,68,114,.15)}
button{margin-top:20px;width:100%;padding:14px;background:linear-gradient(135deg,var(--g3),var(--g2));color:#fff;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;box-shadow:0 5px 15px rgba(26,45,80,.4);transition:all 0.3s}
button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(26,45,80,.5)}
.msg{padding:12px;border-radius:10px;text-align:center;margin-bottom:15px}
.msg.success{background:var(--g3);color:#fff}
.msg.error{background:#e53935;color:#fff}
.hist{max-width:900px;margin:25px auto;padding:0 15px}
.hist .box{max-width:100%;min-width:auto}
.table-container{width:100%;overflow-x:auto;margin-top:10px}
table{width:100%;border-collapse:collapse;min-width:600px}
th,td{padding:12px;text-align:center;border:1px solid #bdc3c7}
th{background:var(--g2);color:#fff;font-weight:600;font-size:14px}
td{color:#333;font-size:14px}
tr:nth-child(even){background:#f8fafc}
tr:hover td{background:#e3f2fd;color:var(--g2);cursor:default}

/* Navigation Bar */
.nav-bar{position:fixed;bottom:0;left:0;right:0;background:rgba(255,255,255,0.98);padding:12px 20px;box-shadow:0 -4px 20px rgba(0,0,0,0.15);display:flex;justify-content:center;align-items:center;gap:15px;z-index:1000}
.nav-btn{display:flex;align-items:center;gap:8px;padding:12px 24px;border-radius:10px;text-decoration:none;font-weight:600;font-size:14px;transition:all 0.3s;border:none;cursor:pointer}
.nav-btn.prev{background:linear-gradient(135deg,#78909c,#546e7a);color:#fff}
.nav-btn.prev:hover{transform:translateX(-5px);box-shadow:0 4px 15px rgba(84,110,122,0.4)}
.nav-btn.home{background:linear-gradient(135deg,var(--g3),var(--g2));color:#fff}
.nav-btn.home:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(26,45,80,0.5)}
.nav-btn.next{background:linear-gradient(135deg,#42a5f5,#1e88e5);color:#fff}
.nav-btn.next:hover{transform:translateX(5px);box-shadow:0 4px 15px rgba(30,136,229,0.4)}
.nav-btn.disabled{background:#e0e0e0;color:#9e9e9e;cursor:not-allowed;pointer-events:none}
.nav-info{text-align:center;color:#666;font-size:12px}
.nav-info strong{color:var(--g2)}
</style>
</head>
<body>

<div class="hd">
    <h2>üë• ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤</h2>
</div>

<div class="wrap">
    <div class="box">
        <h3>üìù ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà</h3>
        
        <?php
        if(isset($_POST['save'])){
            $name = $_POST['name'];
            $id_card = $_POST['id_card'];
            $phone = $_POST['phone'];
            $room_no = $_POST['room_no'];
            $room_type = $_POST['room_type'];

            $sql = "INSERT INTO tenant(name,id_card,phone,room_no,room_type)
                    VALUES('$name','$id_card','$phone','$room_no','$room_type')";
            
            if(mysqli_query($conn,$sql)){
                echo "<div class='msg success'>‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>";
            }else{
                echo "<div class='msg error'>‚ùå Error: ".mysqli_error($conn)."</div>";
            }
        }
        ?>
        
        <form method="post">
            <label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
            <input type="text" name="name" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" required>
            
            <label>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</label>
            <input type="text" name="id_card" maxlength="13" pattern="[0-9]{13}" title="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô 13 ‡∏´‡∏•‡∏±‡∏Å" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 13 ‡∏´‡∏•‡∏±‡∏Å" required>
            
            <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
            <input type="text" name="phone" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" required>
            
            <label>‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á</label>
            <input type="text" name="room_no" placeholder="‡πÄ‡∏ä‡πà‡∏ô 101, 202" required>
            
            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á</label>
            <select name="room_type" required>
                <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á --</option>
                <option value="‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß">üõèÔ∏è ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß</option>
                <option value="‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏π‡πà">üõãÔ∏è ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏π‡πà</option>
            </select>
            
            <button type="submit" name="save">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        </form>
    </div>
</div>

<div class="hist">
    <div class="box">
        <h3>üìã ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
        <div class="table-container">
        <table>
            <tr>
                <th>‡∏£‡∏´‡∏±‡∏™</th>
                <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                <th>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</th>
                <th>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</th>
                <th>‡∏´‡πâ‡∏≠‡∏á</th>
                <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
            </tr>
<?php
$result = mysqli_query($conn,"SELECT * FROM tenant ORDER BY tenant_id DESC");
if(mysqli_num_rows($result) > 0){
    while($row = mysqli_fetch_assoc($result)){
        echo "<tr>";
        echo "<td>".$row['tenant_id']."</td>";
        echo "<td>".$row['name']."</td>";
        echo "<td>".$row['id_card']."</td>";
        echo "<td>".$row['phone']."</td>";
        echo "<td>".$row['room_no']."</td>";
        echo "<td>".$row['room_type']."</td>";
        echo "</tr>";
    }
}else{
    echo "<tr><td colspan='6' style='color:#888;'>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤</td></tr>";
}
?>
        </table>
        </div>
    </div>
</div>

<!-- Navigation Bar -->
<div class="nav-bar">
    <span class="nav-btn prev disabled">‚¨ÖÔ∏è ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</span>
    <div class="nav-info">
        <strong>1</strong> / 4<br>
        <small>‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤</small>
    </div>
    <a href="index.php" class="nav-btn home">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <a href="owner.php" class="nav-btn next">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚û°Ô∏è</a>
</div>

</body>
</html>
